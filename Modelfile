# FROM ./finetuned-qwen-merged.q8_0.gguf
FROM ./finetuned-qwen-merged.q4_k_m.gguf

# Limit output length
PARAMETER num_predict 256

# Lower temperature for more consistent responses
PARAMETER temperature 0.7

# Nucleus sampling
PARAMETER top_p 0.9
PARAMETER repeat_penalty 1.1

# Stop generation at the end of an assistant message per Qwen3 chat format
PARAMETER stop "<|im_end|>"

# Simplified template for general Q&A without complex tool calling
# This aligns better with the training data which includes simple responses
TEMPLATE """{{- if .System }}<|im_start|>system
{{ .System }}<|im_end|>
{{- end }}{{- range .Messages }}{{- if eq .Role "user" }}<|im_start|>user
{{ .Content }}<|im_end|>
{{- else if eq .Role "assistant" }}<|im_start|>assistant
{{ .Content }}<|im_end|>
{{- end }}{{- end }}<|im_start|>assistant
"""

# Simple system message that matches the training approach
SYSTEM "You are an AI assistant that can call tools. Keep answers short and direct."
